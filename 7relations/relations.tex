\graphicspath{{7relations/asy/}}

\section{Relations and Partitions}\label{chap:relations}

The mathematics of sets is rather basic until one has a notion of how to relate elements of sets to each other. We are already familiar with several examples of this, for instance:
\begin{enumerate}\itemsep0pt
  \item The usual \emph{order} of numbers (e.g., $3<7$) is a way of relating/comparing two elements of $\R$.
  \item A \emph{function} $f:A\to B$ relates elements in a set $A$ with those in $B$.
\end{enumerate}

In this chapter we discuss a general framework based on the Cartesian product (Section \ref{sec:cartprod}).

\subsection{Binary Relations on Sets}\label{sec:relations}

\begin{defn}{}{}
	Let $A$ and $B$ be sets. A \emph{(binary) relation} $\cR$ from $A$ to $B$ is a set of ordered pairs
	\[
		\cR\subseteq A\times B
	\]
	A \emph{relation on} $A$ is a relation from $A$ to itself. The \emph{domain} and \emph{range} of $\cR$ are the sets
	\begin{gather*}
		\dom(\cR)=\bigl\{a\in A:\exists b\in B, (a,b)\in\cR\bigr\} \qquad
		\range(\cR)=\bigl\{b\in B:\exists a\in A, (a,b)\in\cR\bigr\}
	\end{gather*}
\end{defn}

If $(a,b)\in\cR$ we can also write $a\relR b$, and say `$a$ is related to $b$.' Similarly $a\notR b$ means $(a,b)\not\in\cR$.

\begin{examples}{}{relationexs}
	\exstart $\cR=\bigl\{(1,3),(2,2),(2,3),(3,2),(4,1),(5,2)\bigr\}$ defines a relation on $\N$. Various true statements about this relation include\par	
	\begin{enumerate}\setcounter{enumi}{1}
	  \begin{minipage}[t]{0.79\linewidth}\vspace{-18pt}
	  \item[]
	  \[
			(2,2)\in\cR,\qquad (4,2)\notin\cR,\qquad 2\notR 5,\qquad 3\relR 2
		\]
		In this case $\dom(\textcolor{blue}{\cR})=\{1,2,3,4,5\}$ and $\range(\textcolor{blue}{\cR})=\{1,2,3\}$.
		
		\item $\cR=\Bigl([1,3)\times (3,4]\Bigr)\cup\bigl\{(2t+1,t^2):t\in [\frac 12,2]\bigr\}$ is a relation on $\R$. This time we have $\dom(\textcolor{Green}{\cR})=[1,5]$ and $\range(\textcolor{Green}{\cR})=[\frac 14,4]$.
	 
	 	\item\label{ex:relationexs3} For any set $A$, the set $\cR=\bigl\{(a,a):a\in A\bigr\}$ is a relation on $A$. The relation $\cR$ is simply `equals:'
		\[
			(a,b)\in \cR\iff a=b
		\]		
		
		\item On $\R$, the relation $\le$ can be \textcolor{cyan}{graphed}: we plot all points $(x,y)\in\R^2$ such that $x\le y$.
		
		\item If $A$ is the set of all humans, we may define $\cR\subseteq A\times A$ by
		\[
			(a,b)\in \cR\iff a,b\text{ have a parent/child or sibling relationship}
		\]
		In this example, the mathematical use of \emph{relation} is similar to that in English: I am related to my sister, and my mother is related to me.
		
		\item If $A$ is a set, then $\subseteq$ is a relation on the power set $\cP(A)$ (the set of subsets).\smallbreak
		For instance, if $A=\{1,2,3\}$ then $\{1\}\subseteq\{1,3\}$ but $\{1,3\}\nsubseteq\{1\}$.
	  \end{minipage}
	  \hfill
	  \begin{minipage}[t]{0.2\linewidth}\vspace{-20pt}
	  	\hfill
	  	\begin{tabular}{@{}c@{}}
	  	\includegraphics{relations-01-reln1}\\
			Example 1\\[5pt]
			\includegraphics{relations-02-reln2}\\
			Example 2\\[5pt]
			\includegraphics{relations-02-reln3}\\
			Example 4
	  	\end{tabular}
	  \end{minipage}
	  
	  \item\label{ex:relationexs7} If $f:A\to B$ is a function then $\bigl\{\bigl(a,f(a)\bigr):a\in A\bigr\}$ is a relation! We'll revisit this in Section \ref{sec:func2}.
	\end{enumerate}
\end{examples}

\goodbreak

With abstract relations, there are only a small number of things we can do.

\begin{defn}{}{relnsym}
	Given a relation $\cR\subseteq A\times B$, its \emph{inverse} $\cR^{-1}\subseteq B\times A$ is the set
	\[
		\cR^{-1}=\bigl\{(b,a)\in B\times A:(a,b)\in\cR\bigr\}
	\]
	To find the elements of $\cR^{-1}$, you simply switch the components of each ordered pair in $\cR$.\smallbreak
	We say that $\cR$ is \emph{symmetric} if $\cR=\cR^{-1}$ (requires $A=B$): i.e., $(x,y)\in \cR\Longleftrightarrow (y,x)\in \cR$.
\end{defn}

\begin{thm}{}{relbasic}
	For any relations $\cR,\cS\subseteq A\times B$:
	\begin{enumerate}\itemsep2pt
	  \item \makebox[200pt][l]{$\dom(\cR^{-1})=\range(\cR)$ \hfill 2.} \ $\range(\cR^{-1})=\dom(\cR)$
		\setcounter{enumi}{2}
		\item \makebox[200pt][l]{$(\cR^{-1})^{-1}=\cR$ \hfill 2.} \ $\cR\subseteq \cS\iff \cR^{-1}\subseteq \cS^{-1}$
		\setcounter{enumi}{4}
		\item \makebox[200pt][l]{$(\cR\cup \cS)^{-1}=\cR^{-1}\cup \cS^{-1}$ \hfill 4.} \ $(\cR\cap \cS)^{-1}=\cR^{-1}\cap \cS^{-1}$
		\setcounter{enumi}{6}
		\item If $A=B$, then $\cR\cup \cR^{-1}$ and $\cR\cap \cR^{-1}$ are both symmetric
	\end{enumerate}
\end{thm}

\begin{proof}
	Here are two of the arguments. Try the others yourself.
	\begin{enumerate}\itemsep0pt
		\item[4.] Suppose $\cR\subseteq\cS$. Then,
		\begin{align*}
			(b,a)\in\cR^{-1}&\implies (a,b)\in\cR \tag{definition of inverse}\\
			&\implies (a,b)\in\cS \tag{since $\cR\subseteq\cS$}\\
			&\implies (b,a)\in\cS^{-1} \tag{definition of inverse}
		\end{align*}
		Therefore $\cR^{-1}\subseteq\cS^{-1}$. Replacing $\cR,\cS$ with $\cR^{-1},\cS^{-1}$ and applying part 1, we also see that
		\[
			\cR^{-1}\subseteq\cS^{-1}\implies (\cR^{-1})^{-1}\subseteq (\cS^{-1})^{-1} \implies \cR\subseteq \cS
		\]
		\item[7.] We prove the first half. By part 3,
		\[
			(\cR\cup \cR^{-1})^{-1}=\cR^{-1}\cup (\cR^{-1})^{-1}=\cR^{-1}\cup \cR=\cR\cup \cR^{-1} \tag*{\qedhere}
		\]
	\end{enumerate}
\end{proof}


\begin{example*}{\ref{ex:relationexs}.1, cont.}{}
	$\cR=\bigl\{(1,3),(2,2),(2,3),(3,2),(4,1),(5,2)\bigr\}$ is not\par
	\begin{minipage}[t]{0.75\linewidth}\vspace{-8pt}
		symmetric. Indeed
		\[
			\cR^{-1}=\bigl\{(3,1),(2,2),(3,2),(2,3),(1,4),(2,5)\bigr\} \neq \cR
		\]
		as should be plain: e.g., $(1,3)\in\cR$ but $(3,1)\notin\cR$. However,
		\begin{gather*}
			\textcolor{Green}{\cR\cap \cR^{-1}}=\bigl\{(2,2), (2,3), (3,2)\bigr\}\quad\text{and}\quad \\
			\textcolor{blue}{\cR\cup \cR^{-1}}=\bigl\{(1,3),(3,1),(2,2),(2,3),(3,2),(4,1),(1,4),(5,2),(2,5)\bigr\}
		\end{gather*}
	\end{minipage}
	\hfill
	\begin{minipage}[t]{0.24\linewidth}\vspace{-20pt}
		\hfill
		\includegraphics{relations-04-relnun}
	\end{minipage}
	\medbreak
	are both symmetric.	Observe the symmetry in the picture. One obtains $\cR^{-1}$ by \emph{reflecting\footnotemark} $\cR$ in the line $y=x$: a \emph{symmetric} relation on $\R$ has \emph{reflection symmetry} in this line.
\end{example*}

\vspace{-10pt}

\footnotetext{Just as one does for inverse functions in calculus\ldots}

\goodbreak


\begin{exercises}{}{}
	A reading quiz and practice question can be found \href{http://www.math.uci.edu/~ndonalds/math13/selftest/7-1-relations.html}{online}.
	
\begin{enumerate}
  \item Let $\cR$ be the relation on $\{0,1,2\}$ defined by
  \[
  	0\relR 0\qquad 0\relR 1\qquad 2\relR 1\]
  \begin{enumerate}
    \item Write $\cR$ as a set of ordered pairs. What are its domain and range?
    \item What is the inverse of $\cR$?
	\end{enumerate}
	
	\item\begin{enumerate}
	  \item Let $\cR$ be the relation on $\R$ defined by $a\relR b\iff\nm{a-b}=1$. Is this relation symmetric? 
 		\item Let $\cS$ be the relation on $\R$ defined by 
		\[
			a \mathrel{\cS} b \iff \exists x \in \Q\setminus\{0\} \text{ such that } a=x^2b
		\]
		Is this relation symmetric? 
	\end{enumerate}
	
  
	\item Draw pictures of the following relations on the set of real numbers $\R$.
	\begin{enumerate}
		\item $\cR=\bigl\{(x,y):y\le 2\text{ and }y\ge x\text{ and }y\ge 2-x\bigr\}$
		\item $\cS=\bigl\{(x,y):(x-4)^2+(y-1)^2\le 9\bigr\}$
	\end{enumerate}
	State the domain and range and draw the inverse of each relation.
	
	
	\item A relation is defined on $\N$ by $a\relR b \Leftrightarrow \frac ab\in\N$. Let $c,d\in\N$. Under what conditions can we write $c\mathrel{\cR^{-1}} d$?
	
	
	\item Let $\cR\subseteq\{1,2,3,4\}\times\{1,2,3,4\}$ be the relation
	\[
		\cR=\bigl\{(1,3),(1,4),(2,2),(2,4),(3,1),(3,2),(4,4)\bigr\}
	\]
	\begin{enumerate}
	  \item Find $\dom(\cR)$, $\range(\cR)$ and $\cR^{-1}$.
	  \item Compute the relations $\cR\cup\cR^{-1}$ and $\cR\cap\cR^{-1}$, and check that they are symmetric.
	\end{enumerate}
	
  
  \item For the relation $\cR=\bigl\{(x,y):x\le y\bigr\}$ on $\N$, what is $\cR^{-1}$, and what is the intersection $\cR\cap\cR^{-1}$?
	
	
	\item Let $\cR \subseteq \Z\times\Z$ be the relation $m\relR n$ iff $m\mid n$. Compute $\cR\cap\cR^{-1}$.
  

  \item Let $A$ be a set with $\nm A=4$. What is the maximum number of elements that a relation $\cR$ on $A$ can contain such that $\cR\cap \cR^{-1}=\emptyset$?
   
  
  \item Give formal proofs of the remaining parts of Theorem \ref{thm:relbasic}.
  
    
  \item Let $\cR$ and $\cS$ be two symmetric relations on a set $A$. 
	\begin{enumerate}
    \item Show $\cR \cap \cS$ is symmetric.
    \item Does $\cR \cup \cS$ have to be symmetric? Give a proof or counterexample.
	\end{enumerate}
  
  
  \item Let $\cR$ be a relation on a set $A$ and define $\cS=\cR\cup\cR^{-1}$. Prove that $\cS$ is the \emph{smallest symmetric relation on $A$ containing $\cR$} in the following sense: if
  \[
  	\mathrm T=\Bigl\{\mathcal T\subseteq A\times A:\mathcal T\text{ symmetric and }\cR\subseteq\mathcal T\bigr\}
  \]
  then
  \[
  	\cS=\bigcap\limits_{\mathcal T\in \mathrm T} \mathcal T
  \]
  (\emph{$\cS$ is known as the \emph{symmetric closure} of $\cR$})
\end{enumerate}

\end{exercises}

\clearpage



\subsection{Functions revisited}\label{sec:func2}

In Section \ref{sec:func1}, we naÃ¯vely defined a function $f:A\to B$ as a \emph{rule} associating to each element $a\in A$ an element $f(a)\in B$. But what do we mean by a \emph{rule}? We address this issue by turning Example \ref*{ex:relationexs}.\ref{ex:relationexs7} on its head: a function $f:A\to B$ is precisely its \emph{graph.}

\begin{example}[lower separated=false, sidebyside, sidebyside align=top seam, sidebyside gap=0pt, righthand width=0.3\linewidth]{}{relfuncsqrt}
	The function $f:[0,4]\to[0,2]:x\mapsto \sqrt x$ corresponds to the \textcolor{blue}{relation}
	\[
		\bigl\{\bigl(x,\sqrt x\bigr):x\in [0,4]\bigr\} \subseteq [0,4]\times [0,2]
	\]
	\tcblower
	\hfill
	\includegraphics{relations-20-reln3}
\end{example}

The difficulty is that we cannot use the notation $f(a)$ until we know that we have a function\ldots

\begin{defn}{}{func}
	A \emph{function} from $A$ to $B$ is a relation $f\subseteq A\times B$ satisfying two conditions:
	\begin{enumerate}
	  \item $\dom(f)=A$ \hfill (each $a\in A$ is related to \emph{at least one} $b\in B$)
	  \item $(a,b_1),(a,b_2)\in f\Longrightarrow b_1=b_2$ \hfill (each $a\in A$ is related to \emph{at most one} $b\in B$)
	\end{enumerate}
\end{defn}

A relation $f\subseteq A\times B$ is a function if and only if \emph{every} $a\in A$ is the first entry of \emph{exactly one} ordered pair $(a,b)\in f$. This is simply an abstraction of the \emph{vertical line test} from calculus.

\begin{example}{}{}
	Let $A=[0,4]$ and $B=[0,5]$. Two relations $f,\cR\subseteq A\times B$ are drawn below.\smallbreak
	The \textcolor{blue}{first relation} defines a function $f:A\to B$ since every $a\in A$ corresponds to exactly one $b\in B$: the \textcolor{cyan}{vertical line} through any $a\in A$ intersects the \textcolor{blue}{graph} in exactly one point $(a,b)$.\smallbreak
	The \textcolor{Green}{second relation} $\cR$ does not define a function. In fact it fails \emph{both} parts of the definition:
	\begin{enumerate}\itemsep0pt
	  \item The \textcolor{Brown}{vertical line} through $\tilde a\in A$ does not intersect the \textcolor{Green}{graph}: $\tilde a\notin\dom(\cR)$.
	  \item The \textcolor{Magenta}{vertical line} through $a\in A$ intersects the \textcolor{Green}{graph} in \emph{two} points $(a,b_1)\neq (a,b_2)$.
	\end{enumerate}
	\begin{center}
	\begin{tabular}{c@{\qquad\qquad}c}
		\includegraphics{relations-05-funcvert}
		&
		\includegraphics{relations-06-funcvert}
	\end{tabular}
	\end{center}
\end{example}

\emph{Injectivity} (Definition \ref{defn:11}) can be rephrased in this new context: $f:A\to B$ injective means
\[
	\tcbhighmath{(\forall a\in A)\ \ (a_1,b),(a_2,b)\in f\implies a_1=a_2}
\]
\emph{Surjectivity} has the same meaning as before: $\range(f)=B$.

\goodbreak


\begin{example}[lower separated=false, sidebyside, sidebyside align=top seam, sidebyside gap=0pt, righthand width=0.33\linewidth]{}{}
	Let $A=\{1,2,3\}$ and $B=\{p,q,r\}$. The relation
	\[
		f=\bigl\{(1,r),(2,p),(3,r)\bigr\}
	\]
	satisfies both conditions necessary to be a function. In elementary language, $f(1)=r$, \ $f(2)=p$ and $f(3)=r$. Moreover $f$ is:
	\begin{quote}
		\emph{Not injective} since $(1,r),(3,r)\in f$ and $1\neq 3$\par
		\emph{Not surjective} since $\range(f)=\{p,r\}\neq B$
	\end{quote}
	The inverse relation
	\[
		f^{-1}=\bigl\{(r,1),(p,2),(r,3)\bigr\}\subseteq B\times A
	\]
	is \emph{not} a function due to failing \emph{both} conditions of Definition \ref{defn:func}.
	\begin{enumerate}
		 \item $\dom(f^{-1})=\{p,r\} \neq B$. The \textcolor{Brown}{vertical line} through $b=q$ does not intersect (the graph of) $f^{-1}$.
		 \item $(r,1)\in f^{-1}$ and $(r,3)\in f^{-1}$, but $1\neq 3$. The \textcolor{magenta}{vertical line} through $b=r$ intersects $f^{-1}$ twice.
	\end{enumerate}
	Note how the manner of these failures are \emph{identical} to the failures of injectivity and surjectivity\ldots
	\tcblower
	\hfill
	\begin{tabular}{@{}c@{}}
		\includegraphics{relations-18-reln1}\\
		The function $f:A\to B$\\[6pt]
		\includegraphics{relations-19-reln1}\\
		$f^{-1}\subseteq B\times A$: not a function
	\end{tabular}
\end{example}

The example highlights one advantage of the relational approach: the inverse of a function $f:A\to B$ \emph{always exists}; it is the \emph{inverse relation} $f^{-1}\subseteq B\times A$. The question is whether $f^{-1}$ is also a function. From the example and our discussions in Section \ref{sec:func1}, you should strongly suspect the answer.

\begin{thm}{}{finverse}
	Let $f:A\to B$ be a function and consider its inverse relation $f^{-1}\subseteq B\times A$. Then
	\begin{quote}
		$f^{-1}$ is a function $\iff f$ is bijective (both injective and surjective)
	\end{quote} 
\end{thm}

\begin{proof}
	Recalling Definition \ref{defn:func}, we see that $f^{-1}$ is a function if and only if the two conditions hold:
	\begin{enumerate}
	  \item $\dom(f^{-1})=B$
	  \item $(b,a_1),(b,a_2)\in f^{-1}\Longrightarrow a_1=a_2$
	\end{enumerate}
	By Theorem \ref{thm:relbasic}, condition 1 is equivalent to $\range(f)=B$; that is, $f$ is surjective.\par
	Condition 2 is equivalent to $(a_1,b),(a_2,b)\in f\Longrightarrow a_1=a_2$: i.e., $f$ is injective.
\end{proof}

\begin{example*}{\ref{ex:relfuncsqrt} cont.}{}
	$f=\bigl\{(x,\sqrt x):x\in[0,4]\bigr\}\subseteq [0,4]\times[0,2]$ is
	\begin{quote}
		\emph{Injective} since $(x_1,y),(x_2,y)\in f\implies x_1=y^2$ and $x_2=y^2$, whence $x_1=x_2$.\par
		\emph{Surjective} since $\range(f)=\bigl\{\sqrt x:x\in[0,4]\bigr\}=[0,2]$.
	\end{quote}
	Since $f$ is bijective, its inverse relation is a \emph{function}: $f^{-1}=\bigl\{(y,y^2):y\in[0,2]\bigr\}$ or, as we'd normally write, $f^{-1}:[0,2]\to[0,4]:y\mapsto y^2$.
\end{example*}
 


\goodbreak


% \begin{examples}{}{}
% 	\begin{enumerate}
% 		\item\label{ex:reln1} Let $A=B=\R$ and $f=\{(x,x^2):x\in\R\}$. This is simply the function with formula $f(x)=x^2$. The inverse relation $f^{-1}\subseteq\R\times\R$ is then
% 		\[
% 			f^{-1}=\bigl\{(x^2,x):x\in\R\bigr\}=\bigl\{(y,\pm\sqrt y):y\ge 0\bigr\}
% 		\]
% 		In this case, $f^{-1}$ is \emph{not a function.} In the language of Definition \ref{defn:func}:
% 		\begin{itemize}
% 		  \item $\dom(f^{-1})=\R^+_0\neq B$. E.g., $-1\in B$ but $-1\not\in\dom(f^{-1})$.
% 		  \item $(4,2)$ and $(4,-2)$ are distinct elements of $f^{-1}$ with the same first entry.
% 		\end{itemize}
% 		\begin{center}
% 			\begin{minipage}{0.35\textwidth}\centering
% 				\includegraphics[width=\textwidth]{relations-20-reln2}\\
% 				$f:A\to B$
% 			\end{minipage}\qquad\qquad\qquad
% 			\begin{minipage}{0.35\textwidth}\centering
% 				\includegraphics[width=\textwidth]{relations-21-reln2}\\
% 				$f^{-1}\subseteq B\times A$: not a function
% 			\end{minipage}
% 		\end{center}
% 		It should be obvious that $f$ is neither injective nor surjective: in the language of relations,
% 		\begin{description}
% 			\item[Not injective]\quad $(2,4)$ and $(-2,4)$ are distinct elements of $f$ with the same second entry.
% 			\item[Not surjective]\quad For instance, $-1$ never appears as the second entry of any pair in $f$.
% 		\end{description}
% 		Observe how these are merely a rewriting of what it means for $f^{-1}$ to fail to be a function.
% 		
% 		\item\label{ex:reln2} Let $A=B=\R$ and $f=\{(x,x^3):x\in\R\}$, so that $f$ has formula $f(x)=x^3$. This time, the inverse is also a function and we could write $f^{-1}(y)=\sqrt[3]{y}$:
% 		\[
% 			f^{-1}=\bigl\{(x^3,x):x\in\R\bigr\}=\bigl\{(y,\sqrt[3]{y}):y\in\R\bigr\}
% 		\]
% 		\begin{center}
% 			\begin{minipage}{0.35\textwidth}\centering
% 				\includegraphics[width=\textwidth]{relations-22-reln3}\\
% 				$f:A\to B$
% 			\end{minipage}\qquad\qquad\qquad
% 			\begin{minipage}{0.35\textwidth}\centering
% 				\includegraphics[width=\textwidth]{relations-23-reln3}\\
% 				$f^{-1}:B\to A$ is a function
% 			\end{minipage}
% 		\end{center}
% 	\end{enumerate}
% \end{examples}
%
% 
% 
% 
% Here is a final example, where the function $f$ is harder to visualize.
% 
% \begin{example}{}{}
% 	Let $A=\R$, $B=\Q$ and define $f$ using the formula 
% 	\[
% 		f(x)=
% 		\begin{cases}
% 			x&\text{if }x\in\Q,\\
% 			0&\text{if }x\not\in\Q.
% 		\end{cases}
% 	\]
% 	In the language of relations, this is $f=\bigl\{(x,x):x\in\Q\bigr\}\cup\bigl\{(x,0):x\not\in\Q\bigr\}$.\par
% 	This is a surjective function since every element of $B=\Q$ appears as the second entry in an ordered pair $(a,b)\in f$. It is not injective since zero appears more than once in the second entry. For example,
% 	\[
% 		(\sqrt 2,0),\ (\sqrt 3,0)\in f
% 	\]
% 	Written in the more common manner, we are observing that $f(\sqrt 3)=f(\sqrt 2)$.\par
% 	The inverse $f^{-1}$ is not a function, and it fails to be so precisely because $f$ is non-injective. For example
% 	\[
% 		(0,\sqrt 2)\text{ and } (0,\sqrt 3)\text{ are distinct elements of $f^{-1}$ with the same  first component.}
% 	\]
% \end{example}
% 
% 
% \begin{aside}{}{}
% {\bf Equality of functions}
% 
% There are two competing notions of what it means for two functions to be \emph{equal.}
% 
% \begin{description}
% 	\item[Same domain, same graph, same codomain]\quad $f=g$ means that $f$ and $g$ are the same subset of the \emph{same} $A\times B$. This notion is preferred by set theorists because it sticks rigidly to the idea that a function is a \emph{relation,} and it requires both the domain $A$ and codomain $B$ to be explicit.
% 	\item[Same domain, same graph]\quad $f=g$ means that $f\subseteq A\times B$, \ $g\subseteq A\times C$, and
% 	\[(a,b)\in f\iff (a,b)\in g.\]
% 	This notion considers what a function \emph{does} to be fundamental; if two functions do the same thing to elements of the same domain then they are the same. This looser notion of equality is used more often, especially in elementary calculus.
% \end{description}
% 
% The second conception of equality, while intuitive, has a problem. For example, let
% \[
% 	f:\R\to\R,\quad\text{and}\quad g:\R\to[-1,1]\quad\text{satisfy}\quad f(x)=g(x)=\sin x
% \]
% Although $f$ and $g$ have the same graph, the different codomains of $f$ and $g$ mean that these are \emph{different functions} with respect to the first notion. Under the second notion, they are the \emph{same function.} However, $g$ is surjective while $f$ is not, so wouldn't we prefer $f$ and $g$ to be non-equal?\footnote{In elementary calculus, we usually say that a function is invertible if it is 1--1. In order for this to make sense, we have to ignore surjectivity and use the second notion of functional equality.}\par
% 
% 
% The same problem does not arise when considering domains. For example, in calculus you might have compared functions such as
% \[
% 	f(x)=x^2+2,\quad\text{and}\quad g(x)=\frac{(x^2+2)(x-1)}{x-1}
% \]
% The implied domains of these functions are $\dom(f)=\R$ and $\dom(g)=\R\setminus\{1\}$. Even though these have the same graph whenever \emph{both} are defined, regardless of which notion you choose we have $f\neq g$, since the functions have \emph{different domains.}
% \end{aside}


\begin{exercises}{}{}
	A reading quiz and practice questions can be found \href{http://www.math.uci.edu/~ndonalds/math13/selftest/7-2-functions.html}{online}.


\begin{enumerate}
  \item Suppose $f$ is the relation
  \[
  	f=\bigl\{(1,1),(2,3),(3,5),(4,7)\bigr\} \subseteq\{1,2,3,4\}\times\{1,2,3,4,5,6,7\}
  \]
  \begin{enumerate}
    \item Show that we have a function $f:\{1,2,3,4\}\to\{1,2,3,4,5,6,7\}$. Can you find a concise formula $f(x)$ to describe this function?
    \item Is $f$ injective? Justify your answer.
    \item Suppose $g\subseteq\{1,2,3,4\}\times B$ is another relation so that the \emph{graphs} of $f$ and $g$ are identical: that is, \emph{as sets,}
    \[
    	\bigl\{(a,f(a)):a\in\{1,2,3,4\}\bigr\} = \bigl\{(a,g(a)):a\in\{1,2,3,4\}\bigr\}
    \]
    If $g$ is a bijective function, what is $B$?
  \end{enumerate}
  
  \item Decide whether each of the following relations are functions. For those which are, decide whether the function is injective and/or surjective.
  \begin{enumerate}
    \item $\cR=\bigl\{(x,y)\in[-1,1]\times[-1,1]:x^2+y^2=1\bigr\}$
    \item $\cS=\bigl\{(x,y)\in[-1,1]\times[0,1]:x^2+y^2=1\bigr\}$
    \item $\mathcal T=\bigl\{(x,y)\in[0,1]\times[-1,1]:x^2+y^2=1\bigr\}$
    \item $\mathcal U=\bigl\{(x,y)\in[0,1]\times[0,1]:x^2+y^2=1\bigr\}$
  \end{enumerate}
  
  
%   \item For each of the examples on page \pageref{ex:reln2}, compute the following inverse images:
%   \begin{enumerate}
%     \item $f^{-1}(\{0,1\})$
%     \item $f^{-1}\Big([0,1)\Big)$
%     \item $f^{-1}\Big((-\infty,0]\Big)$
%     \item $f^{-1}\Big(\{-8\}\cup[-7,2]\cup (3,9)\Big)$
%   \end{enumerate}
  
  
  \item\begin{enumerate}
    \item Express the function $f:\R\to\R:x\mapsto x^4+3$ as a relation.
    \item What is the inverse relation $f^{-1}$?
    \item Use Definition \ref{defn:func} to prove that the relation $f^{-1}$ is \emph{not} a function.
    \item Prove directly from Definition \ref{defn:11} that $f$ is not injective and not surjective. Compare your arguments with your answer to part (c).
  \end{enumerate}
  
  
  \item Repeat the previous question for $f:\R\to\R:x\mapsto \sqrt{x^2-4x+5}$.
  
  
  \item\begin{enumerate}
    \item Express the function $f:\R\to\R:x\mapsto x^3$ as a relation on $\R$.
    \item What is the inverse relation $f^{-1}$? Is it a function? Justify your answer.
  \end{enumerate} 
  
  
  \item	Let $A$ be any set and define the relation $\id_A=\bigl\{(a,a):a\in A\bigr\}$ on $A$. Show that $\id_A$ is a bijective function (it is called the \emph{identity function} on $A$). What is its inverse?

  
  \item Consider the relation $f=\bigl\{(x,x):x\in\Q\bigr\}\cup\bigl\{(x,0):x\not\in\Q\bigr\} \subseteq \R^2$
  \begin{enumerate}
    \item Prove that $f$ is a function $\R\to\R$.
    \item Is $f$ injective? Surjective? Explain.
  \end{enumerate}
  
  
  %\item Give a formal proof of Theorem \ref{thm:inversedomrange}.
  
%   \item Prove or disprove the following: if $f:A\to B$ is a function, and $U,V\subseteq B$, then
%   \[f^{-1}(U\cap V)=f^{-1}(U)\cap f^{-1}(V)\]
  
  \item Suppose $f\subseteq A\times B$ is a function.
  \begin{enumerate}
    \item If $U\subseteq A$, explain why it would be reasonable to write the \emph{image of $U$}  as
    \[
    	f(U)=\bigl\{ b\in B:\exists u\in U\text{ with }(u,b)\in f\bigr\}
    \]
    (\emph{Recall Definition \ref{defn:function1} if you're unsure what this means})
    \item If $V\subseteq B$, how would you write the inverse image $f^{-1}(V)$ in this language?
  \end{enumerate}
\end{enumerate}

\end{exercises}

\clearpage


\subsection{Equivalence Relations \& Partitions}\label{sec:equiv}


What do we mean when we say that two objects are \emph{equal}? Mathematicians use the word flexibly, often in reference to non-identical objects which share some common property.\footnote{This goes back at least to Euclid, who used \emph{equal} to refer to congruent triangles. To Euclid, congruent triangles were \emph{essentially identical} and therefore not worth distinguishing.} You've been doing this for years, indeed our very first result (Theorem \ref{thm:sumeven}: even + even $=$ even) has exactly this flavor.\smallbreak

To help develop a more flexible notion of equality, consider three important concepts.

\begin{example}{}{equals}
	Let $X$ be a set. The following are immediate:
	\begin{itemize}\itemsep1pt
	  \item[]\eqrefl $\forall x\in X$, \ $x=x$
		\item[]\eqsymm $(\forall x,y\in X)\lstsp x=y\implies y=x$
		\item[]\eqtrans $(\forall x,y,z\in X)\lstsp x=y$ \ and \ $y=z\implies x=z$
	\end{itemize}
\end{example}

We turn this simple example on its head to create an abstract, generalized notion of equality.

\begin{defn}{}{}
	We define the following properties for a relation\footnotemark{} $\sim$ on a set $X$:
	\begin{itemize}\itemsep1pt
	  \item[]\eqrefl $\forall x\in X$, \ $x\sim x$\hfill(every element of $X$ is related to itself)
		\item[]\eqsymm $x\sim y\implies y\sim x$\hfill(if $x$ is related to $y$, then $y$ is related to $x$)
		\item[]\eqtrans $x\sim y$ \ and \ $y\sim z\implies x\sim z$\hfill(if $x$ is related to $y$ and $y$ is related to $z$,\\
		\phantom{bob}\hfill then $x$ is related to $z$)
	\end{itemize}
	An \emph{equivalence relation} on $X$ is a relation $\sim$ satisfying all three properties.
\end{defn}

\footnotetext{\emph{Symmetry} is precisely as in Definition \ref{defn:relnsym}. As we've done, the universal quantifiers for symmetry and transitivity are typically hidden. The symbol $\sim$ (`tilde,' or `twiddles') is commonly used for an abstract equivalence relation. It is the same symbol used to denote \emph{similar triangles}: congruence and similarity are both equivalence relations on the set of triangles!}

\smallbreak

Example \ref{ex:equals} says that `equals' is indeed an equivalence relation on any set $X$. Things would be very boring if this were the only example\ldots


\begin{example}{}{eqrelmod2}
	Define a relation $\sim$ on $\Z$ by
	\[
		x\sim y\iff x-y\ \text{ is even} \tag{otherwise said, $x\equiv y\spmod 2$}
	\]
	We claim that $\sim$ is an equivalence relation on $\Z$.
	\begin{itemize}
		\item[]\eqrefl $\forall x\in\Z,\ x-x=0$ is even, hence $x\sim x$.
		\item[]\eqsymm Given $x,y\in\Z$, \ $x\sim y\implies x-y$ even $\implies y-x$ even $\implies y\sim x$.
		\item[]\eqtrans Given $x,y,z\in\Z$,
		\begin{align*}
			x\sim y \text{ and } y\sim z&\implies x-y\text{ even \ and }y-z\text{ even }\\
			&\implies x-z=(x-y)+(y-z)\text{ is even } \tag{Theorem \ref{thm:sumeven}!}\\
			&\implies x\sim z
		\end{align*}
	\end{itemize}
As we'll see shortly, an equivalence relation algebraically characterizes what it means for elements to share a common property: here $x\sim y$ if and only if they have the same \emph{parity.}
\end{example}

\goodbreak


It would also be somewhat dull if every relation were an equivalence relation. In fact most are not.

\begin{examples}{}{notequiv}
	\exstart Consider the relation $\le$ on the natural numbers $\N$. We check each condition:
	\begin{enumerate}\setcounter{enumi}{1}
		\item[]\begin{itemize}
			\item[]\eqrefl True. $\forall x\in\R$, \ $x\le x$.
			\item[]\eqsymm False. For example, $2\le 3$ but $3\nleq 2$.
			\item[]\eqtrans True. $\forall x,y,z\in\R$, if $x\le y$ and $y\le z$, then $x\le z$.
		\end{itemize}
		Plainly $\le$ is \emph{not} an equivalence relation on $\N$.
		
		\item Let $X$ be the set of lines in the plane and define $\ell_1\relR\ell_2\Longleftrightarrow \ell_1,\ell_2$ intersect.
		\begin{itemize}
			\item[]\eqrefl True. Every line intersects itself, so $\ell\relR\ell$ for all $\ell\in X$.\par
			\begin{minipage}[t]{0.67\linewidth}\vspace{-5pt}
				\item[]\eqsymm True. For all lines $\ell_1,\ell_2\in A$, if $\ell_1$ intersects $\ell_2$, then $\ell_2$ intersects $\ell_1$.\vspace{1pt}
				\item[]\eqtrans False. As the picture illustrates, if $\ell_1,\ell_3$ are parallel and $\ell_2$ crosses both, then $\ell_1\relR\ell_2$, $\ell_2\relR\ell_3$ and $\ell_1\notR\ell_3$.
			\end{minipage}
			\hfill
			\begin{minipage}[t]{0.3\linewidth}\vspace{-3pt}
				\includegraphics{relations-07-parallel}
			\end{minipage}
		\end{itemize}
		Again $\cR$ is not an equivalence relation on $X$.
		
		\item\label{ex:notequiv3} The relation $\cR=\bigl\{(1,1),(1,3),(3,1),(3,3)\bigr\}$ is not an equivalence relation on $X=\{1,2,3\}$.
		\begin{itemize}
			\item[]\eqrefl False. For instance $(2,2)\notin\cR$ \ (otherwise said, $2\notR 2$).
			\item[]\eqsymm True. In all four cases, $(x,y)\in\cS\Longrightarrow (y,x)\in\cR$ is clear.
			\item[]\eqtrans True. Check this yourself; there are six valid combinations!
		\end{itemize} 
	\end{enumerate}
\end{examples}


The usefulness of equivalence relations comes when we group together all related elements.

\begin{defn}{}{equivrel}
	Given an equivalence relation $\sim$ on $X$, the \emph{equivalence class} of $x\in X$ is the set
	\[
		[x]=\{y\in X:y\sim x\} \tag{$y\in [x]\Longleftrightarrow y\sim x$}
	\]
	If $y\in[x]$, we call $y$ a \emph{representative} of the equivalence class $[x]$. The \emph{quotient} of $X$ by $\sim$ is the set of equivalence classes:
	\[
		\quotient X\sim=\bigl\{[x]:x\in X\bigr\} \tag{read `$X$ modulo $\sim$'}
	\]
\end{defn}

\begin{examples}{}{}
	We start by revisiting our first two examples.
	\begin{enumerate}
	  \item (Example \ref{ex:equals})\lstsp For the equivalence relation $x\sim y\Longleftrightarrow x=y$ on a set $X$, each equivalence class has precisely one element $[x]=\{x\}$; the quotient is the set of singleton subsets,
	  \[
	  	\quotient X\sim=\bigl\{\{x\}:x\in X\bigr\}
	  \]
	  \item (Example \ref{ex:eqrelmod2})\lstsp For the relation $x\sim y\Longleftrightarrow x-y$ is even, there are two equivalence classes:
	  \begin{gather*}
	  	[0]=\{\ldots,-4,-2,0,2,4,\ldots\}=2\Z=\{\text{even integers}\}\\
	  	[1]=\{\ldots,-3,-1,1,3,5,\ldots\}=1+2\Z=\{\text{odd integers}\}
	  \end{gather*}
	  and the quotient has two elements: $\quotient{\Z}\sim=\bigl\{[0],[1]\bigr\}$.
	\end{enumerate}
\end{examples}

Note that any even number is a representative of the first class in the even/odd example: for instance
\[
	4\in[0]\ \text{ since\ }\ 4-0=4\ \text{ is even.}
\]
Indeed $[4]=[0]$, which leads us a simple piece of bookkeeping\ldots


\begin{lemm}{}{preequiv}
	Suppose $\sim$ is an equivalence relation. Then $x\sim y\Longleftrightarrow [x]=[y]$.
\end{lemm}

Observe how the proof uses all three \textcolor{red}{defining properties} of an equivalence relation.

\begin{proof}
	\begin{description}
		\item[$(\Leftarrow)$] By \textcolor{red}{reflexivity}, $x\in[x]$. Thus $[x]=[y] \Longrightarrow x\in[y]\Longrightarrow x\sim y$.
		\item[$(\Rightarrow)$] Suppose $x\sim y$. We prove that $[x]=[y]$ by showing that each side is a subset of the other.
		\begin{description}
			\item[$(\subseteq)$] Let $z\in[x]$. By definition, $z\sim x$. By \textcolor{red}{transitivity},
			\[
				z\sim x\ \text{ and }\ x\sim y\implies z\sim y\implies z\in[y]
			\]
			%We conclude that $[x]\subseteq[y]$.
			\item[$(\supseteq)$] By \textcolor{red}{symmetry}, we also have $y\sim x$. Repeating the previous argument yields $[y]\subseteq [x]$.\qedhere
		\end{description}
	\end{description}
\end{proof}


\begin{example}{}{}
	Let $X=\{$students taking this course$\}$ and defined, $\forall x,y\in X$,
	\[
		x\sim y\iff x \text{ achieves the same letter-grade as $y$}
	\]
	It should be clear that this is an equivalence relation (try saying out loud what reflexivity, symmetry \& transitivity mean here!).	There is one equivalence class for each letter-grade awarded, each class being the set of all students who obtain a given grade. If we label the equivalence classes $\mathrm{A^+,A,A^-,B^+,\ldots,F}$, where, say, $\mathrm B=\{$students obtaining a B-grade$\}$, then the quotient
		\[
			\smash{\quotient{X}{\sim}}=\bigl\{\mathrm{A^+,A,A^-,B^+,\ldots,F}\bigr\}
		\]
		is essentially the set of possible letter-grades!	Suppose Laura \& Jorge both achieve a $\mathrm{B^+}$; both are representatives of this equivalence class and the following propositions are all true:
		\[
			\text{Laura}\in \mathrm{B^+},\qquad \text{Jorge}\in\mathrm{B^+},\qquad \text{Laura}\sim\text{Jorge},\qquad [\text{Laura}]=[\text{Jorge}] =\mathrm{B^+}
		\] 
\end{example}


The example is a special case of a general construction.

\begin{thm}{}{funceqreln}
	Suppose $f$ is a function with domain $X$. Then 
	\[
		x\sim y\iff f(x)=f(y)
	\]
	defines an equivalence relation on $X$. There is one equivalence class $[x]=\{y\in X:f(x)=f(y)\}$ for each value in $\range(f)$.
\end{thm}

The proof is an exercise. A suitable function in the previous example would be
\[
	f:X\to \bigl\{\mathrm{A^+,A,A^-,B^+,\ldots,F}\bigr\}\quad \text{where} \quad f(x) =\text{``$x$'s letter grade''}
\]
This converse to the theorem always holds: if $\sim$ is an equivalence relation then the so-called \emph{canonical map} $f:X\to \quotient X\sim:x\mapsto [x]$ satisfies $x\sim y\Longleftrightarrow f(x)=f(y)$!

\goodbreak


\begin{examples}{}{funceqreln}
	\exstart The function
	\[
		f:\Z\to\{0,1,2,3,4\}:x\mapsto x^2\pmod 5 \tag{take the remainder on division by 5}
	\]
	defines an equivalence relation on $\Z$:
	\[
		x\sim y\iff x^2\equiv y^2\pmod 5
	\]
	\begin{enumerate}\setcounter{enumi}{1}
		\item\label{ex:equivcircle} The function $f:\R^2\to\R:(x,y)\mapsto x^2+y^2$ defines an equivalence relation\footnotemark{} on $\R^2$:
		\[
			(x,y)\sim(v,w)\iff x^2+y^2=v^2+w^2
		\]
		\begin{minipage}[t]{0.67\linewidth}\vspace{-10pt}
			As stated in the Theorem, there is one equivalence classes for each element $r^2\in\range(f)=\R^+_0$: if $x^2+y^2=r^2$, then
			\[
		  	[(x,y)]=\Bigl\{(v,w)\in\R^2:v^2+w^2=r^2\Bigr\}
			\]
			is the \emph{circle of radius $r$ centered at the origin.} The equivalence class $[(1,0)]$ \textcolor{blue}{highlighted} in the picture. Moreover, the quotient set is
			\[
				\quotient{\R^2}{\sim}=\{\text{circles centered at the origin}\}
			\]
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.3\linewidth}\vspace{-20pt}
			\hfill
			\includegraphics{relations-24-circles}
		\end{minipage}
	\end{enumerate}
	
\end{examples}

\footnotetext{Be careful: $\sim$ is a subset of $\R^2\times\R^2$, whereas each \emph{equivalence class} is a subset of $\R^2$!}

\vspace{-8pt}

\boldinline{Partitions}

When you cut a cake, each crumb ends up in exactly one slice. To \emph{partition} a set is to do precisely this: split into disjoint subsets so that each element lies in exactly one subset.

\begin{defn}{}{partition}
	Let $X$ be a set. A collection $\{A_n\}$ of non-empty subsets $A_n\subseteq X$ \emph{partitions} $X$ if
	\begin{enumerate}
		\item $X=\bigcup A_n$ \hfill(each $x\in X$ lies in \emph{at least one} subset $A_n$)
		\item If $A_m\neq A_n$, then $A_m\cap A_n=\emptyset$\hfill(each $x\in X$ lies in \emph{at most one\footnotemark} subset $A_n$)
	\end{enumerate}
\end{defn}

\footnotetext{\emph{Distinct} sets $A_n$ are \emph{pairwise disjoint} (Definition \ref{defn:unionint}). It is sometimes useful in examples to permit $A_m=A_n$.}


Partitions are intimately related to equivalence relations, as the next example illustrates.

\begin{example}{}{}
	Partition $X=\{1,2,3,4,5\}$ into subsets
	\[
		A_1=\{1,3\},\quad A_2=\{2,4\},\quad A_3=\{5\}
	\]
	and consider the relation $\sim$ on $X$ defined by\footnotemark
	\[
		x\sim y\iff \text{$x,y$ are in the \emph{same} subset $A_n$}
	\]
	Run through the checklist: $\sim$ is reflexive, symmetric \& transitive; it is an equivalence relation! Moreover, its equivalence classes are precisely the partitioning subsets $A_1,A_2$ and $A_3$:
	\[
		[1]=[3]=\{1,3\}=A_1,\qquad [2]=[4]=\{2,4\}=A_2,\qquad [5]=\{5\}=A_5 \rule[-10pt]{0pt}{10pt}
	\]
\end{example} 

\footnotetext{Otherwise said, $\sim$ is the set $\bigl\{(1,1),(1,3),(3,1),(3,3),(2,2),(2,4),(4,2),(4,4),(5,5)\bigr\}\subseteq X\times X$.}


\vspace*{-10pt}

\goodbreak


This tight relationship between partitions and equivalence relations is completely general: equivalence relations provide a straightforward \emph{algebraic} method of working with partitions.

\begin{thm}{}{equivpart}
	%Let $X$ be a set.
	\exstart If $\sim$ is an equivalence relation on $X$, then its equivalence classes partition $X$.
	\begin{enumerate}\setcounter{enumi}{1}
		%\item If $\sim$ is an equivalence relation on $X$, then its equivalence classes partition $X$.
		\item A partition $\{A_n\}$ of $X$ defines an equivalence relation $\sim$ on $X$ by
		\[
			x\sim y\iff \exists A_n\text{ such that }x,y\in A_n
		\]
		Its equivalence classes are the distinct subsets $A_n$: otherwise said, $\smash[t]{\quotient X\sim}=\{A_n\}$.
	\end{enumerate}
\end{thm}

\begin{minipage}[t]{0.5\linewidth}\vspace{-3pt}
	In short, \emph{equivalence relations and partitions are essentially the same thing!}\footnotemark{} The picture illustrates part 2 and the cake-cutting metaphor:
	\begin{gather*}
		A_1=[a],\quad A_2=[b]=[c],\\[3pt]
		b\sim c,\quad a\nsim b, \quad a\nsim c
	\end{gather*}
\end{minipage}
\hfill
\begin{minipage}[t]{0.49\linewidth}\vspace{-6pt}
	\hfill
	\includegraphics[scale=1]{relations-08-part}
\end{minipage}
\medbreak

Before reading the proof, look back at \emph{every} example of an equivalence relation in this section and convince yourself that the equivalence classes really do partition the `big set.' In both parts of the proof look for where the \textcolor{red}{assumptions} are used---reflexive, symmetric, transitive in part 1; the two partition conditions in part 2---and think about why they are needed.

\footnotetext{Even more is true. If you think carefully, conditions 1 \& 2 in the definition of partition (\ref{defn:partition}) now form a disguised version of the vertical line test for the canonical map (Theorem \ref{thm:funceqreln})!}


\begin{proof}
	\begin{enumerate}
		\item Given an equivalence relation $\sim$ on $X$, we must establish two claims:
		\begin{enumerate}
	  	\item Every $x\in X$ lies in some equivalence class. This follows by \textcolor{red}{reflexivity}: for each $x\in X$,
	  	\[
	  		x\sim x\implies x\in [x]
	  	\]
	  	Every element of $X$ lies in the equivalence class defined by itself!
	  	
	  	\item Distinct equivalence classes are pairwise disjoint: $[x]\neq[y]\Longrightarrow [x]\cap[y]=\emptyset$. We establish the contrapositive. If $[x]\cap [y]\neq\emptyset$, then $\exists z\in [x]\cap [y]$. But then
			\begin{align*}
				z\sim x\ \text{ and }\ z\sim y&\implies x\sim z\ \text{ and }\ z\sim y \tag{\textcolor{red}{symmetry}}\\
				&\implies x\sim y \tag{\textcolor{red}{transitivity}}\\
				&\implies [x]=[y] \tag{\textcolor{red}{Lemma \ref{lemm:preequiv}}}
			\end{align*}
		\end{enumerate}
		
		\item We need only demonstrate the reflexivity, symmetry and transitivity of $\sim$.
		\begin{itemize}
			\item[]\eqrefl $\textcolor{red}{X=\bigcup A_n}\implies$ every $x\in X$ lies in some $A_n$. Thus $x\sim x$ for all $x\in X$.
			\item[]\eqsymm $x\sim y \implies \exists A_n$ such that $x,y\in A_n \implies y,x\in A_n\implies y\sim x$.
			\item[]\eqtrans If $x\sim y$ and $y\sim z$, then $\exists A_m,A_n$ such that $x,y\in A_m$ and $y,z\in A_n$. Then
			\begin{align*}
				y\in A_m\cap A_n &\implies \textcolor{red}{A_m\cap A_n\neq\emptyset\implies A_m=A_n}\\
				&\implies x,z\in A_n\\
				&\implies x\sim z \tag*{\qedhere}
			\end{align*}
		\end{itemize}
	\end{enumerate}
\end{proof}



\goodbreak


\begin{exercises}{}{}
	A reading quiz and practice questions can be found \href{http://www.math.uci.edu/~ndonalds/math13/selftest/7-3-equiv.html}{online}.

	\begin{enumerate}
	  \item\label{exs:cong3} Show that $x\sim y\Longleftrightarrow x\equiv y\pmod 3$ defines an equivalence relation on $\Z$. What are the equivalence classes?
	  
	  	
	  \item\begin{enumerate}
	  	\item Let $\sim$ be the relation on $\Z$ defined by $a\sim b\Longleftrightarrow a+b$ is even. Show that $\sim$ is an equivalence relation and determine its equivalence classes.
	  	\item If `even' is replaced by `odd' in part (a), which of the properties reflexive, symmetric, transitive does $\sim$ now possess?
	  \end{enumerate}
	  
		
		\item For each equivalence relation on $\R^2$, identify the equivalence classes and draw several of them.
		\begin{enumerate}
			\item $(a,b)\sim(c,d)\iff ab=cd$ \qquad\qquad\qquad (b)\lstsp $(v,w)\sim(x,y)\iff v^2w=x^2y$
		\end{enumerate}	
	
	
		\item Let $X=\{1,2,3,4,5,6\}$. The distinct equivalence classes resulting from an equivalence relation $\sim$ on $X$ are $\{1,4,5\}$, $\{2,6\}$, and $\{3\}$. What is $\sim$? Give your answer as a subset of $X\times X$.
	
	
		\item $\subseteq$ is a relation on any set of sets. Is $\subseteq$ reflexive, symmetric, transitive? Prove your assertions.
	  
		
	  \item Suppose $X$ is a set with at least two elements. Which of the properties reflexive, symmetric, transitive are satisfied by the relation $\neq$?
	
	
		\item Let $X=\{ax^3+bx^2+cx+d:a,b,c,d\in\R\}$ be the set of polynomials of degree $\le 3$. Define a relation $\cR$ on $X$ by
	  \[
	  	p\relR q\iff p\text{ and $q$ have a common real root} \  \bigl(\exists x\in\R: p(x)=q(x)\bigr)
	  \]
	  For instance $p(x)=(x-1)^2$ and $q(x)=x^2-1$ have the root 1 in common, so $p\relR q$. Determine which of the properties reflexive, symmetric and transitive are possessed by $\cR$.
	
	
	  \item Let $A=\{2^m:m\in\Z\}$. A relation $\sim$ is defined on the set $\Q^+$ of positive rational numbers by
	  \[
	  	a\sim b\iff ab^{-1}\in A
	  \]
	  Show that $\sim$ is an equivalence relation and describe the elements in the equivalence class $[3]$.
	
	
	  \item A relation is defined on the set $X=\{a+b\sqrt 2:a,b\in\Q,\,a+b\sqrt 2\neq 0\}$ by $x\sim y\iff \frac xy\in\Q$. Show that $\sim$ is an equivalence relation and determine the distinct equivalence classes.
	  
	  
	
		\item For the purposes of this question, a real number is $x$ \emph{small} if $\nm x\le 1$. Let $\cR$ be the relation on the set of real numbers defined by $x \relR y \iff x-y$ is small.\par
		Prove or disprove: $\cR$ is an equivalence relation on $\R$.
	  	
		
	  \item Find the equivalence classes for the relation $\sim$ in Example \ref{ex:funceqreln}.1.
	  
	  
	  \item For each relation $\cR$ on $\Z$, decide whether it is reflexive, symmetric, or transitive, and whether it is an equivalence relation.
		\begin{enumerate}
			\item $a\relR b \iff a\equiv b\pmod 3$ or $a\equiv b\pmod 4$
			\item $a\relR b \iff a\equiv b\pmod 3$ and $a\equiv b\pmod 4$
		\end{enumerate}
		
		
	  \item For Example \ref*{ex:notequiv}.\ref{ex:notequiv3}, compute the `classes' $[x]=\{y\in X:x\cR y\}$. What do you observe?
	  
	  
	  \goodbreak
	  
	  
		\item Let $X=\{1,2,3\}$. Define the relation $\cS=\big\{(1,1),(1,2),(1,3),(2,1),(2,2),(3,1),(3,3)\big\}$ on $X$.
		\begin{enumerate}
		  \item Which of the properties reflexive, symmetric, transitive are satisfied by $\cS$?
		  \item Let $A_n=\{x\in X:x\mathbin{\cS}n\}$. Show that $\{A_1,A_2,A_3\}$ do not partition $X$.
		  \item Repeat parts (a) and (b) for the relation $\cT$ on $X$, where
		  \begin{gather*}
		  	\cT=\bigl\{(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,3)\bigr\}
		  \end{gather*}
		\end{enumerate}
		(\emph{Warning! Some of the sets $A_1,A_2,A_3$ might be the same in these examples})
	
	
		\item (Example \ref*{ex:funceqreln}.\ref{ex:equivcircle})\lstsp Prove directly that the circles $A_r=\bigl\{(x,y):x^2+y^2=r^2\bigr\}$ partition $\R^2$: i.e.,
		\[
			\R^2=\bigcup_{r\ge 0}A_r \quad\text{and}\quad
			A_{r_1}\cap A_{r_2}\neq\emptyset \implies A_{r_1}=A_{r_2}
		\]
	
	
		\item Determine whether each collection $\{A_n:n\in\R\}$ partitions $\R^2$. Sketch several of the sets $A_n$.
		\begin{enumerate}
			\item \makebox[200pt][l]{$A_n=\big\{(x,y)\in\R^2:y=2x+n\big\}$ \hfill (b)} \ $A_n=\big\{(x,y)\in\R^2:y=(x-n)^2\big\}$
			\setcounter{enumii}{2}
		  \item \makebox[200pt][l]{$A_n=\big\{(x,y)\in\R^2:xy=n\big\}$ \hfill (d)} \ $A_n=\big\{(x,y)\in\R^2:y^4-y^2=x-n\big\}$
		\end{enumerate}
		
		
		\item Let $X$ be the set of all humans. If $x\in X$, define the set
		\[
			A_x=\{\text{people who had the same breakfast \emph{or} lunch as $x$}\}
		\]
		\begin{enumerate}
		  \item Does the collection $\{A_x:x\in X\}$ partition $X$? Explain your answer.
		  \item Is your answer different if the \emph{or} in the definition of $A_x$ is changed to \emph{and}?
		\end{enumerate}
		
		
	  \item\label{exs:anstisymm} A relation $\cR$ is \emph{antisymmetric} if $\bigl((x,y)\in \cR\bigr)\wedge\bigl((y,x)\in \cR\bigr)\Longrightarrow x=y$. Give examples of relations $\cR$ on $X=\{1,2,3\}$ having the stated property.
		\begin{enumerate}
			\item $\cR$ is both symmetric and antisymmetric.
			\item $\cR$ is neither symmetric nor antisymmetric.
			\item $\cR$ is transitive but $\cR\cup \cR^{-1}$ is not transitive.
		\end{enumerate}
		
		
		\item Let $\cR$ be a relation on $X$ and define its \emph{reflexive closure} $\cS=\cR\cup\bigl\{(x,x):x\in X\bigr\}$. Prove that $\cS$ is reflexive and that, if $\cT$ is any reflexive relation for which $\cR\subseteq\cT$, then $\cS\subseteq\cT$.
		
		
		\item\begin{enumerate}
		  \item Prove Theorem \ref{thm:funceqreln}.
		  \item If $f$ has domain $X$, explain why $\bigl\{f^{-1}(\{b\}):b\in\range(f)\bigr\}$ forms a partition of $X$.
		\end{enumerate}
		
	  
		\item Define a relation $\sim$ on $\R^2\setminus\{(0,0)\}$ by
		\[
			(x,y)\sim (v,w)\iff \exists\lambda\neq 0\ \text{ such that }\ (\lambda x,\lambda y)=(v,w)
		\]
		\begin{enumerate}
		  \item Prove that $\sim$ is an equivalence relation.
		  \item What does this relation have to do with projective space $\pr(\R^2)$ (Example \ref{ex:projline})?
		\end{enumerate}
	  
	
	
	  \item (\emph{If you've studied linear algebra})\lstsp We say that square matrices $A,B$ are \emph{similar} if there exists a matrix $M$ such that $B=MAM^{-1}$.
	  \begin{enumerate}
	    \item Prove that similarity is an equivalence relation on the set of $n\times n$ matrices.
	    \item What is the equivalence class of the identity matrix?
	    \item Show that 
	   	$\begin{smatrix}
	    	-11&15\\-5&9
	    \end{smatrix}$
			and
			$\begin{smatrix}
	    	4&10\\0&-6
	    \end{smatrix}$
	    are similar.
	    \par
	    (\emph{Hint: diagonalize the matrices!})
	    %\item (Hard) Suppose $L:\R^2\to\R^2$ is a linear map and $\beta,\gamma$ are bases of $\R^2$. Suppose that $A=[L]_\beta$ and $B=[L]_\gamma$ are the matrix representations of $L$ with respect to the two bases. Prove that $A\sim B$.
	%     \item (Hard) Suppose that $A,B$ have the same, but distinct, eigenvalues $\lambda_1\neq\lambda_2$. Prove that $A\sim B$. \emph{Again use diagonalization, the challenge here is to make your proof work even when the eigenvalues are complex numbers.}
		\end{enumerate}

	\end{enumerate}
\end{exercises}


\clearpage


\subsection{Well-definition, Rings and Congruence}\label{sec:welldefn}

We return to our discussion of congruence (Section \ref{sec:cong}) in the context of equivalence relations and partitions. The important observation is that \emph{congruence modulo $n$ is an equivalence relation on $\Z$,} each equivalence class being the set of all integers sharing a remainder modulo $n$.

\begin{thm}{}{congequiv1}
	For a fixed $n\in\N$, define $x\sim_n y\iff x\equiv y\pmod n$. Then $\sim_n$ is an equivalence relation on $\Z$.
\end{thm}

The theorem is merely a generalization of Example \ref{ex:eqrelmod2} and Exercise \ref*{sec:equiv}.\ref{exs:cong3}. You should prove this yourself. The equivalence classes are precisely the integers which are congruent modulo $n$:
\begin{align*}
	[a]&=\bigl\{x\in\Z:x\equiv a\spmod n\bigr\}\\
	&=\bigl\{x\in\Z:x\text{ and $a$ have the same remainder as when divided by $n$}\bigr\}\\
	&=\bigl\{x\in\Z:x-a\text{ is divisible by $n$}\bigr\}
\end{align*}
In this language, we can restate what it means for two equivalence classes to be equal.

\begin{lemm}{}{congequiv2}
	$[a]=[b]\iff a\equiv b\pmod n\iff \exists k\in\Z\text{ such that }b=a+kn$.
\end{lemm}

If the meaning of \emph{any} of the above is unclear, re-read the previous section! The equivalence classes of $\sim_n$ partition the integers  into  exactly $n$ subsets, one for each remainder. The quotient set is therefore
\[
	\quotient \Z{\sim_n}=\bigl\{[0],[1],\ldots,[n-1]\bigr\}
\]
We use this set to define an extremely important object.

\begin{defn}{}{}
	Define operations $\textcolor{red}{+_n}$ and $\textcolor{red}{\cdot_n}$ on the quotient set $\quotient\Z{\sim_n}$ as follows:
	\[
		[x]\mathbin{\textcolor{red}{+_n}}[y]:=[x\mathbin{\textcolor{cyan}{+}}y],\qquad [x]\mathbin{\textcolor{red}{\cdot_n}}[y]:=[x\mathbin{\textcolor{cyan}{\cdot}} y]
	\]
	The \emph{ring} $\Z_n$ is the set $\quotient\Z{\sim_n}$ together with the operations $\textcolor{red}{+_n}$ and $\textcolor{red}{\cdot_n}$.
\end{defn}

It is important to appreciate that $\textcolor{red}{+_n}$ and $\textcolor{red}{\cdot_n}$ are \emph{new operations,} defining addition/multiplication of \emph{equivalance classes} in terms of standard \textcolor{cyan}{addition/multiplication} of integers.

\begin{example}{}{}
	We work in the ring $\Z_8$. According to the definition,
	\[
		[3]+_8[6]=[3+6]=[9]=[1]
	\]
	There is a potential difficulty: each equivalence class is \emph{large} (e.g., $[3]=\{\ldots,-5,3,11,19,\ldots\}$), so we have lots of \emph{choice} regarding representatives. For instance, since $[3]=[11]$ and $[6]=[22]$ we should be able to observe that
	\[
		[11]+_8[22] =[3]+_8[6]
	\]
	Is this true? If not, then the operation $+_8$ would not be particularly useful. Thankfully this is not a problem: according to the definition of $+_8$, things turn out exactly as we'd like,
	\[
		[11]+_8[22]=[11+22]=[33]=[1] =[3]+_8[6]
	\]
\end{example}


\goodbreak


Consider things more abstractly. Given equivalence classes $X$ and $Y$, here is the process for computing the equivalence class $X+_nY$:
\begin{enumerate}
  \item \emph{Choose representatives} $x\in X$ and $y\in Y$ so that $X=[x]$ and $Y=[y]$.
  \item \emph{Sum the integers} $x$ and $y$ to get a \emph{new integer} $x+y\in\Z$.
  \item \emph{Take the equivalence class} $X+_nY=[x+y]$.
\end{enumerate}
The concern is that there are \emph{infinitely many possible choices} for elements $x\in X$ and $y\in Y$ in step 1. If $+_n$ is to make sense, we must obtain the \emph{same} equivalence class $[x+y]$ {\bf regardless of our choices of $x$ and $y$.} This indeed happens, as we indicate with a special piece of terminology.


% 
% \begin{defn}{}{well}
% 	A concept is \emph{well-defined} if it is \emph{independent of all choices used in the definition.}
% \end{defn}


\begin{thm}{}{congwd}
	The operations $+_n$ and $\cdot_n$ are well-defined.
\end{thm}

This is nothing more than a rehash of Theorem \ref{thm:congbasic}: compare it with what follows until you are comfortable we are doing the same thing! Observe that
\[
	[x]=\bigl\{z\in\Z:z\equiv x\spmod n\bigr\} =\bigl\{x+kn:k\in\Z\bigr\}
\]
Otherwise said, all representatives (all possible choices in step 1) of the equivalence class $[x]$ have the form $x+kn$ for some $k\in\Z$. Thinking similarly for $y$, the Theorem requires only that we prove
\[
	\forall k,l\in\Z,\quad [x+kn]+_n[y+ln]=[x]+_n[y]\quad\text{and}\quad [x+kn]\cdot_n[y+ln]=[x]\cdot_n[y]
\]

\begin{proof}
	We prove that $+_n$ is well-defined.
	\begin{align*}
		[x+kn]+_n[y+ln]&=[(x+kn)+(y+ln)] \tag{definition of $+_n$}\\
		&=[x+y+(k+l)n] =[x+y] \tag{Lemma \ref{lemm:congequiv2}}\\
		&=[x]+_n[y] \tag{definition of $+_n$}
	\end{align*}
	The argument for $\cdot_n$ is similar.
\end{proof}



Compare our equivalence class notation with that from Section \ref{sec:cong}. For instance
\[
	[-3]+_8[12]=[1] \quad \text{means the same thing as} \quad -3+12\equiv 1\spmod 8 \tag{$\ast$}
\]


\begin{aside}{}{}
\boldinline{Aside: Advanced Notation}
	Given the applicability of $\Z_n$, it is customary in higher-level mathematics to drop the square brackets and all subscripts, simply writing
	\[
		\Z_n=\bigl\{0,1,2,\ldots,n-1\bigr\}
	\]
	In this language, ($\ast$) would simply be written $-3+12=1$ in $\Z_8$. It is critical to appreciate here that $-3,12$ and 1 denote \emph{sets} (equivalence classes), not \emph{integers.} Until you are 100\% certain of this, you should stick to either of the notations in $(\ast)$.\smallbreak
	It is something of a mathematical joke to write $1+1=0$ (in $\Z_2$). Even in this context, $1+1$ still equals 2; the issue is that $2=0$ in $\Z_2$, hence the seemingly paradoxical statement. This is really a very simple claim about \emph{sets}: that the sum of any two odd numbers is even!
\end{aside}


\goodbreak


\boldinline{Functions and Partitions}

Our construction of $\Z_n$ is a special case of a more general situation.%
\footnote{Theorem \ref{thm:congwd} verifies the well-definition of two functions $+_n,\cdot_n:\quotient\Z{\sim_n}\times\quotient\Z{\sim_n}\to\quotient\Z{\sim_n}$}

\begin{defn}{}{}
	Let $\sim$ be an equivalence relation on a set $X$ and let $A$ be any set. Suppose we construct $f:\quotient X\sim\to A$ using a rule of the form
	\[
		f([x]):= \text{``do something to a representative $x$''}
	\]
	We say that $f$ is \emph{well-defined} if this construction defines a legitimate function. More formally:
	\[
		[x]=[y] \implies f([x])=f([y])
	\]
\end{defn}


\begin{examples}{}{}
	\exstart Consider $\Z_3=\quotient\Z\sim$, that is $X=\Z$ where $x\sim y\Longleftrightarrow x\equiv y\pmod 3$. The rule $f([x])=2x+1$ does \emph{not} produce a well-defined function $f:\Z_3\to\Z$ since, for instance
	\[
		[0]=[9]\quad \text{but}\quad f([0])=1\neq 19 =f([9])  
	\]
	
	\begin{enumerate}\setcounter{enumi}{1}
	  \item The rule $f([x])=[2x+1]$ does produce a well-defined function $f:\Z_3\to\Z_3$ however:
	  \begin{align*}
	  	[x]=[y]&\implies y=x+3k\ \ \text{for some integer $k$}\\
	  	&
	  	\begin{array}{@{}r@{}l}
	  		{}\implies f([y])&{}=f([x+3k]) =[2x+6k+1] =[2x+1] \\[3pt]
	  		&{}=f([x])
	  	\end{array}
	  	\tag{since $6x\equiv 0\spmod 3$}
	  \end{align*}
	  \begin{minipage}[t]{0.72\linewidth}\vspace{0pt}
	  	If this seems very abstract, note that the function is easily stated in tabular form since there are only three possible inputs!
	  \end{minipage}
	  \hfill
	  \begin{minipage}[t]{0.25\linewidth}\vspace{-10pt}
	  	\hfill $\def\arraystretch{1.2}
	  	\begin{array}{c|ccc}
	  		[x]&[0]&[1]&[2]\\\hline
	  		f([x])&[1]&[0]&[2]
	  	\end{array}$
	  \end{minipage}

	
		\item This last example is something of an advert for the advanced notation in the previous aside. We ask for which integers $k$ the rule $f_k(x)=kx$ produces a well-defined function $f_k:\Z_4\to\Z_6$. If this is confusing, re-rewrite using either of the notations
		\[
			f_k(x)=kx\spmod 6 \quad\text{or}\quad f_k([x]_4)=[kx]_6
		\]		
		\begin{minipage}[t]{0.59\linewidth}\vspace{-10pt}
		 	Start with a special case to get a feel for things. A table of values for $f_1(x)$ shows an immediate problem! 
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.4\linewidth}\vspace{-12pt}
		  \hfill $\begin{array}{c|cccc|cccc}
				x&\textcolor{blue}{0}&1&2&3&\textcolor{blue}{4}&5&6&\cdots\\\hline
				f_1(x)&\textcolor{red}{0}&1&2&3&\textcolor{red}{4}&5&0&\cdots
			\end{array}$
		\end{minipage}\par
		In $\Z_4$, we have $\textcolor{blue}{0}=\textcolor{blue}{4}$, however $f_1(\textcolor{blue}{0})=\textcolor{red}{0}$ and $f_1(\textcolor{blue}{4})=\textcolor{red}{4}$ \emph{which are not equal in $\Z_6$}! It follows that $f_1$ is \emph{not well-defined}: it isn't a function (and never was!).\par
		Now proceed systematically.
		\[
			x\equiv y\spmod 4\implies x-y=4n \implies kx-ky=4kn \tag{for some $n\in\Z$}
		\]
		It follows that $f_k$ is well-defined ($f_k(x)=f_k(y)\in\Z_6$) if and only if $6\mid 4kn$\, \emph{for all} $n\in\Z$. This is the case if and only if $6\mid 4k$. Otherwise said,
		\[
			\text{$f_k$ is well-defined}\iff 6\mid 4k\iff 3\mid 2k\iff 3\mid k
		\]
		\begin{minipage}[t]{0.59\linewidth}\vspace{-10pt}
			Since $kx\in\Z_6$, equivalent values of $k$ modulo 6 won't change $f_k$: there are only \emph{two} well-defined functions $f_0(x)=0$ and $f_3(x)=3x$.
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.4\linewidth}\vspace{-12pt}
		  \hfill $\begin{array}{c|cccc|cccc}
				x&0&1&2&3&4&5&6&\cdots\\\hline
				f_0(x)&0&0&0&0&0&0&0&\cdots\\\hline
				f_3(x)&0&3&0&3&0&3&0&\cdots
			\end{array}$
		\end{minipage}\smallbreak
		You'll have much more practice with problems like these when you study group theory.
	\end{enumerate}
\end{examples}



\boldsubsubsection{Geometric Applications: the cylinder and the torus (optional!)}

As a fun application, we consider how the equivalence relations permit the easy construction of functions on certain geometric objects.

\begin{examples}{}{}
	\exstart Define an equivalence relation on $\R^2$ by
	\[
		(a,b)\sim (c,d)\iff a-c\in\Z \ \text{ and }\ b=d
	\]
	The equivalence classes are horizontal strings of points with the same $y$ co-ordinate:
	\[
		[(a,b)]=\bigl\{(a+n,b):n\in\Z\bigr\}
	\]
	\begin{enumerate}\setcounter{enumi}{1}
	  \begin{minipage}[t]{0.53\linewidth}\vspace{-17pt}
			\item[]The set of equivalence classes $\quotient{\R^2}\sim$ may be visualized as a \emph{cylinder} by imagining rolling the plane into a tube of circumference 1 so that all points in a given \textcolor{cyan}{equivalence class} coincide.\footnotemark\smallbreak
			Now consider the rule $f([(x,y]))=y\sin(2\pi x)$. %Observe that
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.45\linewidth}\vspace{-50pt}
			\hfill\includegraphics[scale=0.85]{relations-13-cylinder}
		\end{minipage}
		\par\vspace{-19pt}
		\begin{align*}
	  	[(x,y)]=[(v,w)]
	  	&\implies
	  	\begin{cases}
				x=v+n,\text{ for some $n\in\Z$}\\
				y=w
			\end{cases}\\
	  	&
	  	\begin{array}{@{}r@{}l}
	  		{}\implies f\bigl([(x,y)]\bigr)&{}=y\sin(2\pi x) =w\sin(2\pi v)\\[3pt]
	  		&{}=f\bigl([(v,w)]\bigr)
	  	\end{array}
	  \end{align*}
	  Otherwise said, $f:\smash{\quotient{\R^2}\sim}\to\R$ is a well-defined function whose \emph{domain is the cylinder.}
	   
	  \item As a natural extension, see if you can visualize why the equivalence classes of the relation
	  \[
			(a,b)\sim (c,d)\iff a-c\in\Z \ \text{ and }\ b-d\in\Z
		\]
		on $\R^2$ may be identified with a torus (the surface of a ring-doughnut). The function
		\[
			f\bigl([x,y]\bigr) =\sin(2\pi x)\cos(2\pi y)
		\]
		is well-defined and may thought of as having domain the torus. The pictures below illustrate $f$, where the colors correspond.\par
		\begin{minipage}[t]{0.49\linewidth}\vspace{-5pt}
			\centering
			\includegraphics[scale=0.9]{relations-14-torus}
		\end{minipage}
		\hfill
		\begin{minipage}[t]{0.49\linewidth}\vspace{-22pt}
			\centering
			\includegraphics[scale=0.7]{relations-14-torus2}
		\end{minipage}
% 				\\
% 				The function $f$: domain $T^2$
% 				&
% 				The function $f$ restricted to $[0,1)\times [0,1)$
	\end{enumerate}
\end{examples}

\footnotetext{Alternatively, imagine piercing a roll of toilet paper and unrolling it: the \textcolor{cyan}{single puncture} becomes a \textcolor{cyan}{row} of (almost!) equally spaced holes. Unfortunately for the analogy, toilet paper has purposeful thickness!}

%Some related examples and ideas are in the exercises.

\goodbreak




% \boldsubsubsection{Optional: The Canonical Map}
% 
% To do this justice, and to give you a taste for the details which are necessary in pure mathematics, here is the important definition.
% 
% \begin{defn}{}{}
% 	Suppose that $\sim$ is an equivalence relation on a set $X$. The function $\gamma:X\to \quotient X\sim$ defined by $\gamma(x)=[x]$ is the \emph{canonical map.}\footnote{Canonical, in mathematics, just means natural or obvious.}
% \end{defn}
% 
% For us, the purpose of the canonical map is to allow us to construct functions $f:\quotient X\sim\to A$.
% 
% \begin{thm}{}{}
% 	Suppose that $\sim$ is an equivalence relation on $X$.
% 	\begin{enumerate}
%   	\item If $f:\quotient X\sim\to A$ is a function, then $F:X\to A$ defined by $F=f\circ\gamma$ satisfies
%   	\[
%   		x\sim y\implies F(x)=F(y)
%   	\]
%   	\item If $F:X\to A$ satisfies $x\sim y\implies F(x)=F(y)$, then there is a unique function $f:\quotient X\sim\to A$ satisfying $F=f\circ\gamma$.
% 	\end{enumerate}
% \end{thm}
% 
% \begin{proof}
% \begin{enumerate}
%   \item\begin{align*}
% 	\hspace{4.3pt}\text{This is trivial:}\quad x\sim y&\implies [x]=[y]\implies \gamma(x)=\gamma(y)\\
% 	&\implies f(\gamma(x))=f(\gamma(y))\implies F(x)=F(y).
% 	\end{align*}\
% 	\item $f:\quotient X\sim\to A$ can only be the function \emph{defined} by $f([x])=F(x)$. We show that this is well-defined:
% 	\begin{gather*}
% 	[x]=[y]\implies x\sim y\implies F(x)=F(y)\implies f([x])=f([y]).\tag*{\qedhere}
% 	\end{gather*}
% \end{enumerate}
% \end{proof}
% 
% \begin{minipage}[t]{0.65\linewidth}\vspace{0pt}
% 	The proof, like much of mathematics, is a masterpiece in concision that seems to be doing nothing at all. The point is that functions of the form $f:\quotient X\sim\to A$ are \emph{difficult} to work with. The Theorem says that we never need to explicitly use such functions, and can instead work with \emph{simpler} functions of the form $F:X\to A$. The only condition is that we must have $x\sim y\implies F(x)=F(y)$. Essentially, $F$ is $f$ in disguise!
% \end{minipage}
% \hfill
% \begin{minipage}[t]{0.3\linewidth}\vspace{0pt}
% 	\includegraphics[width=\textwidth]{relations-17-isomthm}
% \end{minipage}\par
% 
% This result will be resurrected when you study Groups, Rings \& Fields as part of the famous \emph{First Isomorphism Theorem.}


% \paragraph{Self-test Questions}
% 
% \begin{enumerate}
%   \item Let $k$ be a constant integer. If $f:\Z_5\to\Z_{18}:x\mapsto kx$ is a well-defined function, what period must the sequence of values $f(0),f(1),f(2),\ldots$ have?
%   \item State what it means for a function $f:\quotient X\sim\to A$ to be well-defined.
% \end{enumerate}


% 
% \begin{examples}{}{}
% \begin{enumerate}
% 	\item Show that $f:\Z_n\to\Z_n$ defined by $f(x)=x^2+4\pmod n$ is well-defined.\par
% 	We must check that $x\equiv y\pmod n\implies x^2+4\equiv y^2+4\pmod n$. But this is trivial!
% \end{enumerate}
% \end{examples}


\begin{exercises}{}{}
	A reading quiz and practice questions can be found \href{http://www.math.uci.edu/~ndonalds/math13/selftest/7-4-welldefn.html}{online}.

\begin{enumerate}
  \item Let $X$ be the set of students in a (large) math class and define an equivalence relation on $X$ via
  \[
  	x\sim y\iff x,y\text{ either both wear glasses, or both do not wear glasses}
  \]
  Does the rule $f([x])=$ ``$x$'s name'' describe a well-defined function? Explain.
  
  \item\begin{enumerate}
    \item Explicitly check that $[7]+[21]=[98]+[-5]$ in $\Z_{13}$.
    \item Suppose that $[5]\cdot[7]=[8]\cdot[9]$ makes sense in the ring $\Z_n$. Find $n$.
  \end{enumerate}
  
%   \item\begin{enumerate}
    \item Prove the second half of Theorem \ref{thm:congwd}, that $\cdot_n$ is well-defined.
% 	  \item Prove by induction that the operation of raising to the power $m\in\N$ is well-defined in $\Z_n$. I.e., prove that
%   \[\forall m\in\N,\ \forall [x]\in\quotient{\Z}{\sim_n}\text{ we have } [x^m]=[x]^m.\]
%   \emph{Be careful! $n$ is fixed, your induction variable is $m$. What base case(s) do you need?}
%   \end{enumerate} 
  
  
  
  \item Suppose that $p$ is prime and that in $\Z_p$, we have $[a] \neq [0]$. Show $[a]^2 \neq [0]$.\par
  (\emph{Hint: See Exercise \ref{ex:primedef} in Section \ref{sec:strongind}})
  
  \item Give an explicit proof of Theorem \ref{thm:congequiv1}.
  



	\item\begin{enumerate}
	  	\item Prove or disprove: $f:\Z_3\to\Z_5:x\mapsto x^3\pmod 5$ is well-defined.
			\item Prove or disprove: $f:\Z_{10}\to\Z_{20}:x\mapsto x^2\pmod{20}$ is well-defined.
		\end{enumerate}
		
		
				
	\item Determine whether the following are well-defined.
	\begin{enumerate}
		\item $f:\Z_8\to\Z_{16}$ by $f(x)=2x$ \hfill (equivalently $f(x)=2x\spmod{16}$, or $f([x]_8)=[2x]_{16}$).
		\item $g:\Z_8\to\Z_{12}$ by $g(x)=2x$ \ ($g([x]_8)=[2x]_{12}$).
	\end{enumerate}
		
	\item Can we view $F(x,y)=(y^2-1)\sin^2(\pi x)$ as a function whose domain is the cylinder, as described on page \pageref{subsec:cylinder}? Explain your answer. 

	\item\begin{enumerate}
	  	\item Compute $(x+4n)^2$.
	  	\item Suppose that $\forall n\in\Z$, we have $(x+4n)^2\equiv x^2\pmod m$. Find all the integers $m$ for which this is a true statement.
	  	\item For what $m\in\N_{\ge 2}$ is the function $f:\Z_4\to\Z_m:x\mapsto x^2\pmod m$ well-defined.
		\end{enumerate}
		
	\item A rule $f:\quotient X\sim\to A$ is well-defined if $[x]=[y]\implies f\bigl([x]\bigr)=f\bigl([y]\bigr)$.
	\begin{enumerate}
	  \item State what it means for $f:\quotient X\sim\to A$ to be \emph{injective.} What do you observe?
	  \item Prove that $f:\Z_7\to\Z_{35}:x\mapsto 15x$ is a well-defined, injective function.
	  \item Repeat part (b) for the function $f:\Z_{100}\to\Z_{300}:x\mapsto 9x$. Compare your arguments for well-definition and injectivity.\\
	  \emph{This forces you to write your argument abstractly, rather than using a table! You may find it useful that $9\cdot(-11)\equiv 1\pmod{100}$.}
	\end{enumerate}
		
		
	\item\label{ex:qequiv} Consider the relation $\sim$ defined on $\Z\times\N$ by
  \[
  	(a,b)\sim(c,d)\iff ad=bc
  \]
  \begin{enumerate}
    \item Prove that $\sim$ is an equivalence relation.
    \item List several elements of the equivalence class of $(2,3)$. Repeat for the equivalence class of $(-3,7)$. What do the equivalence classes have to do with the set of rational numbers $\Q$?
    \item Define operations $\oplus$ and $\otimes$ on $\quotient{\Z\times\N}\sim$ by
    \[
    	[(a,b)]\oplus[(c,d)]=[(ad+bc,bd)],\qquad [(a,b)]\otimes[(c,d)]=[(ac,bd)]
    \]
    Prove that $\oplus$ and $\otimes$ are well-defined (\emph{do this without using division!}).
    \item	(Hard)\lstsp Prove that $f\bigl([(x,y)]\bigr)=\frac xy$ is a \emph{well-defined bijection} $f:\quotient{\Z\times\N}\sim\to\Q$, and that $f$ transforms the operations $\oplus$ and $\otimes$ into the usual addition and multiplication of rational numbers: that is,
		\begin{gather*}
			f\Bigl(\bigl[(a,b)\bigr]\oplus\bigl[(c,d)\bigr]\Bigr)=f\Bigl(\bigl[(a,b)\bigr]\Bigr)+f\Bigl(\bigl[(c,d)\bigr]\Bigr)\\
			f\Bigl(\bigl[(a,b)\bigr]\otimes\bigl[(c,d)\bigr]\Bigr)=f\Bigl(\bigl[(a,b)\bigr]\Bigr)\cdot f\Bigl(\bigl[(c,d)\bigr]\Bigr)
		\end{gather*}
		(\emph{This is essentially a formal definition of the ring of rational numbers!})
  \end{enumerate}
  
  
  

	\item Define a partition of the sphere $S^2=\bigl\{(x,y,z):x^2+y^2+z^2=1\bigr\}$ into subsets of the form
	\[
		\bigl\{(x,y,z),(-x,-y,-z)\bigr\}
	\]
	Each subset consists of two points directly opposite each other on the sphere (antipodal points). Let $\sim$ be the equivalence relation whose equivalence classes are the above subsets.
	\begin{enumerate}
	  \item $f:\quotient{S^2}{\sim}\to\R:[(x,y,z)]\mapsto xyz$ is not well-defined. Explain why.
	  \item Prove that $f:\quotient{S^2}{\sim}\to\R^3:[(x,y,z)]\to(yz,xz,xy)$ is a well-defined function.\\
		\emph{The image of this function is Steiner's \href{http://en.wikipedia.org/wiki/Roman_surface}{Roman Surface}, another example, like the Klein Bottle, of a generalization of the M\"obius Strip.}
	\end{enumerate}
		
		
% 				\item Let $\mathcal{C} = \{\text{circles centered at the origin}\} \cup \{(0,0)\}$.
% \begin{enumerate}
%     \item Find an equivalence relation $\sim$ on $\R^2$ such that $\R^2/\sim \, = \mathcal{C}$.
%     \item Let $f : \mathcal{C} \to \R$ by $f(C) = \text{radius of } C$. Theorem 7.21 says there is a function $F : \R^2 \to \R$ such that $F = f \circ \gamma$ where $\gamma$ is the canonical map. Determine an explicit formula for $F$.
% \end{enumerate}

\item Define $\sim$ on $\R$ by $x \sim y$ if and only if $x - y \in \Z$. 
\begin{enumerate}
    \item Show $\sim$ is an equivalence relation on $\R$.
    \item Find a function $F : \R \to [0,1)$ such that $x \sim y$ implies $F(x) = F(y)$.
    \item Use part (b) to find a well-defined function $f : \R / \sim \to [0,1)$. Is $f$ a bijection?
\end{enumerate}

% \item Every function can be factored as a composition of a surjection followed by a bijection followed by an injection. Let $f : A \to B$ be a function. We show that $f = i \circ g \circ \gamma$ where $i$ is an injection, $g$ a bijection, and $\gamma$ a surjection.
% \begin{enumerate}
%     \item Define $\sim$ on $A$ by $a \sim b$ if and only if $f(a) = f(b)$. Show $\sim$ is an equivalence relation on $A$.
%     \item Let $\gamma : A \to A/\sim$ be the canonical projection. Show there is a well-defined function $g : A/\sim \to \range(f)$ such that $f^* = g \circ \gamma$ where $f^* : A \to \range(f)$ is the function $f^*(a) = f(a)$.
%     \item Show that $g$ is a bijection.
%     \item Let $i : \range(f) \to B$ be the inclusion map $i(b) = b$. Show $f = i \circ f^*$, and conclude that $f = i \circ g \circ \gamma$.
% \end{enumerate}


	\item Suppose that $\sim$ is an equivalence relation on $X$. Prove the following:
	\begin{enumerate}
		\item If $f:\quotient X\sim\to A$ is well-defined, then $F:X\to A$ defined by $F=f\circ\gamma$ satisfies
		\[
			x\sim y\implies F(x)=F(y)
		\]
		\item If $F:X\to A$ satisfies $x\sim y\Longrightarrow F(x)=F(y)$, then there is a unique function $\smash{f:\quotient X\sim\to A}$ satisfying $F=f\circ\gamma$.
	\end{enumerate}

% 
% \begin{proof}
% \begin{enumerate}
%   \item\begin{align*}
% 	\hspace{4.3pt}\text{This is trivial:}\quad x\sim y&\implies [x]=[y]\implies \gamma(x)=\gamma(y)\\
% 	&\implies f(\gamma(x))=f(\gamma(y))\implies F(x)=F(y).
% 	\end{align*}\
% 	\item $f:\quotient X\sim\to A$ can only be the function \emph{defined} by $f([x])=F(x)$. We show that this is well-defined:
% 	\begin{gather*}
% 	[x]=[y]\implies x\sim y\implies F(x)=F(y)\implies f([x])=f([y]).\tag*{\qedhere}
% 	\end{gather*}
% \end{enumerate}
% \end{proof}

	\item\begin{enumerate}
	 	\item Partition the square $[0,1]\times[0,1]$ into subsets
	 	\[
	 		\{(0,y),(1,1-y)\}\quad\text{and}\quad \{(x,y)\} \ (\text{whenever }x\neq 0,1)
	 	\]
		
	\end{enumerate}
\end{enumerate}

\end{exercises}




% \boldinline{The MÃ¶bius Strip}
% 
% Take a rectangle, for example $X=[0,6]\times[0,1]$, and partition into the following subsets.
% \begin{itemize}
% 	\item If a point does not lie on the left or right edge of the rectangle, place it in a subset by itself: $\{(x,y)\}$ for $x\neq 0,6$,
% 	\item If a point does lie on the left or right edge of the rectangle, place it in a subset with one point from the other edge: $\{(0,y),(6,1-y)\}$ for any $y$.
% \end{itemize}
% The rectangle is drawn below, where the points on the left and right edges are colored red. The arrows indicate how the edges are paired up. For example the point $(0,0.8)$ (high on the left near the tip of the arrow) is paired with $(6,0.2)$ (low on the right edge of the rectangle).\par
% These subsets clearly partition the rectangle $X$. The partitions define an equivalence relation $\sim$ on $X$ in accordance with Theorem \ref{thm:equivpart}. Note that there are infinitely many equivalence classes. The question is how we should interpret the quotient set $\quotient X\sim$?\par
% This is easier to visualize than you might think. Since each point on the left edge of the rectangle lies in an equivalence class with a point on the right edge, we imagine gluing the two edges together in such a way that the corresponding points touch. In the picture, we imagine holding $X$ like a strip of paper, giving it a twist, and then gluing the edges together. This is the classic construction of a MÃ¶bius strip. The advantage of the quotient set calculation is that it is very easy to work with points in the original rectangle. As long as you permanently assume that equivalent points of the rectangle correspond to the same point of the MÃ¶bius strip you can easily work only in the rectangle.\par
% 
% \begin{center}
% 	\begin{tabular}{c}
% 		\includegraphics[scale=3.4]{relations-10-mobius}\\
% 		Rectangle
% 	\end{tabular}
% 	\hspace*{.5cm}
% 	\begin{tabular}{c}
% 		\includegraphics[scale=3.4]{relations-11-mobius}\\
% 		Half twist
% 	\end{tabular}\\[15pt]
% 	\begin{tabular}{c}
% 		\includegraphics[width=0.65\textwidth,height=75pt]{relations-12-mobius}\\
% 		Glue arrows to obtain MÃ¶bius strip\\[15pt]
% 	\end{tabular}
% \end{center}


% Let $L$ be the set of lines in the plane $\R^2$ and consider the relation $\ell_1\sim\ell_2\iff \ell_1$  is parallel to $\ell_2$. Then
% \begin{description}\itemsep=0pt
% \item[Reflexivity] $\ell\sim\ell$ since any line is parallel to itself.
% \item[Symmetry] $\ell_1\sim\ell_2\Rightarrow\ell_2\sim\ell_1$ since one line is parallel to a second iff the second is parallel to the first.
% \item[Transitivity] Suppose that $\ell_1$ is parallel to $\ell_2$, which is parallel to $\ell_3$, then $\ell_1$ is parallel to $\ell_3$; hence $\ell_1\sim \ell_2$ and $\ell_2\sim\ell_3\Rightarrow \ell_1\sim \ell_3$.
% \end{description}
% $\sim$ is therefore an equivalence relation. The equivalence class of a line is the set of all lines parallel to it: for example
% \[[y=2x-1]=\{y=2x+c:c\in\R\}.\]
% Each equivalence class is a copy of the real numbers. We can say more to get a handle on what the set of equivalence classes looks like. Every line in a fixed equivalence class has the same gradient $m\in\R\cup\{\infty\}$ (vertical, infinite gradient, lines are allowed!). To each $m\in\R\cup\{\infty\}$ there is exactly one equivalence class. In some sense you may therefore view $\{[\ell]\}=L/\sim$ as the set $\R\cup\{\infty\}$.\\
% Alternatively, all lines in an equivalence class make the same angle $\theta\in[0,180^\circ)$ with the $x$-axis. Replace each equivalence class by the point $(\cos 2\theta,\sin 2\theta)$ and we see that there is precisely one equivalence class for every point on the circle of radius one.\\
% We are tempted to say something like $L/\sim=\R\cup\{\infty\}=S^1$ (where $S^1$ is the circle). This is not correct, but the three sets are \emph{bijective} (we will see this in section \ref{sec:func}) and indeed \emph{homeomorphic}, which means topologically identical.

% \boldinline{The Cylinder}%\label{page:cylinder}
% 
% We could construct a cylinder similarly to the MÃ¶bius strip, by identifying edges of the rectangle but \emph{without} applying the half-twist. Instead we do something a little different.\par
% 
% Let $X=\R^2$ with equivalence relation $\sim$ defined by
% \[
% 	(a,b)\sim (c,d)\iff a-c\in\Z\quad\text{\emph{and}}\quad b=d
% \]
% The equivalence classes are horizontal strings of points with the same $y$ co-ordinate. If we imagine wrapping $\R^2$ repeatedly around a cylinder of circumference 1, all of the points in a given equivalence class will now line up. The set of equivalence classes $\quotient{\R^2}\sim$ can therefore be visualized as a cylinder.
% 
% Alternatively, you may imagine piercing a roll of toilet paper and unrolling it. The single puncture now becomes a row of (almost!\footnote{Unfortunately for the analogy, toilet paper has purposeful thickness!}) equally spaced holes.\par
% 
% In the picture, the left hand side is (part of) the plane $\R^2$, displayed so that points in each equivalence class have the same height and color. The three horizontal dots all lie in the same equivalence class. When we roll up the plane, all three points end up at the same point on the cylinder.
% 
% \begin{center}
% 	%\includegraphics[scale=1.2]{relations-13-cylinder(mp)}\\
% 	\includegraphics[width=0.8\textwidth]{relations-13-cylinder}
% \end{center}
% 
% More complex shapes can be created by other partitions/relations. If you want a challenge in visualization, consider why the equivalence relation
% \[
% 	(a,b)\sim (c,d)\iff a-c\in\Z\quad\text{\emph{and}}\quad b-d\in\Z
% \]
% on $\R^2$ defines a torus (the surface of a ring-doughnut).


  % 	\item Suppose that $\cR,\cS$ are relations on some set $X$. Define the \emph{composition} $\cR\circ \cS$ to be the relation
% 	\[(a,c)\in \cR\circ \cS\iff \exists b\in X\text{ such that }(a,b)\in \cR\text{ and }(b,c)\in \cS.\]
% 	\begin{enumerate}
% 		\item If $\cR=\{(1,1),(1,2),(2,3),(3,1),(3,3)\}$ and $\cS=\{(1,2),(1,3),(2,1),(3,3)\}$, find $\cR\circ \cS$.
% 		\item Suppose that $\cR$ and $\cS$ are reflexive. Prove that $\cR\circ \cS$ is reflexive.
% 		\item Suppose that $\cR$ and $\cS$ are symmetric. Prove that $(x,y)\in \cR\circ \cS\iff (y,x)\in \cS\circ \cR$.
% 		\item Give an example of symmetric relations $\cR,\cS$ such that $\cR\circ \cS$ is \emph{not} symmetric. Conclude that if $\cR,\cS$ are equivalence relations, then $\cR\circ \cS$ need not be an equivalence relation.
% 	\end{enumerate}
	
% 		\item Let $\cR$ be a relation on a set $X$. Inductively define $\cR^n$ for $n \in \N$ as follows:
% \begin{itemize}
%     \item $\cR^1 = \cR$
%     \item $\cR^{n + 1} = \cR \circ \cR^n$.
% \end{itemize}
% Set
% \[
% \cR^+ = \bigcup_{n \in \N} \cR^n.
% \]
% Show that $\cR^+$ is the smallest transitive relation on $X$ containing $\cR$. That is,
% \begin{enumerate}
%     \item $\cR^+$ is transitive.
%     \item $\cR \subseteq \cR^+$.
%     \item If $\cT$ is a transitive relation on $X$ such that $\cR \subseteq \cT$, then $\cR^+ \subseteq \cT$. [Hint: use induction to show $\cR^n \subseteq \cT$ for all $n \in \N$.]
% \end{enumerate}
% We call $\cR^+$ the \emph{transitive closure} of $\cR$.
% \begin{enumerate}\setcounter{enumii}{3}
%     \item Let $X = \{a,b,c,d\}$ and $\cR = \{(a,b), (b,c), (c,d)\}$. Compute $\cR^+$.
% \end{enumerate}
  
  
% 	\item Using the equivalence relation description of the MÃ¶bius strip, prove that you may cut a MÃ¶bius strip round the middle and yet still end up with a single loop.\\
% 	\emph{Where would you cut the defining rectangle and how can you tell that you still have one piece?}
% 
% 	
% 	\item (Hard!) A \emph{Klein bottle} can be visualized as follows. Define an equivalence relation $\sim$ on the unit square $X=[0,1]\times[0,1]$ so that:
% 	\begin{itemize}
% 	  \item $(0,y)\sim (1,y)$ for $0\le y\le 1$.
% 	  \item $(x,0)\sim(1-x,1)$ for $0\le x\le 1$.
% 	\end{itemize}
% 	The result is the picture: the blue edges are identified in the same direction and the red edges in the opposite. Attempting to visualize this in 3D requires a willingness to stretch and distort the square, but results in the green bottle. The original red and blue arrows have become curves on the bottle. If you are using Acrobat Reader, click on the bottle and move it around.
% 	\begin{enumerate}
% 	  \item Suppose you cut the Klein bottle along the horizontal dashed line of the defining square. What is the resulting object? What happens to the green bottle?
% 	  \item Now cut the square along the vertical dashed line. What do you get this time?
% 	\end{enumerate}
% 	Can you visualize where the two dashed lines are on the green bottle?
% 	
% 	\includegraphics{relations-hw01-kleinsquare}
% 	\includemedia[width=0.99\textwidth, transparent=false, activate=onclick, add3Djscript=asylabels.js, %add3Djscript=3Dspintool.js,
% 3Dmenu,
%   3Dcoo=7.8239054679870605 -2.621169090270996 -71.13204956054688,
%   3Dc2c=-0.4364800751209259 0.7419548630714417 0.5089088082313538,
%   3Droo=219.44206346507434,
%   3Droll=-1.9382490979948275,
% 3Dlights=Headlamp]{\includegraphics{relations-hw02-klein+0_0}}{relations-hw02-klein+0.prc}

